import React, { useState, useEffect } from 'react';
import { 
  Heart, MapPin, Coffee, Utensils, Camera, Sun, Moon, 
  Share2, Star, Navigation, ExternalLink, Filter 
} from 'lucide-react';

// --- ë°ì´í„° ëª¨ë¸: ë„¤ì´ë²„ ì§€ë„ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ê³  ì´ í˜•ì‹ìœ¼ë¡œ ì •ë¦¬í•˜ì‹œë©´ ë©ë‹ˆë‹¤ ---
const SEOUL_COURSES = [
  {
    id: 1,
    title: "ì„±ìˆ˜ë™ íŒì—… & ì¹´í˜ íˆ¬ì–´",
    description: "ìš”ì¦˜ ê°€ì¥ í•«í•œ íŒì—…ìŠ¤í† ì–´ì™€ ê°ì„± ì¹´í˜ë¥¼ ë¬¶ì€ íŠ¸ë Œë”” ì½”ìŠ¤",
    region: "seongsu", // ì§€ì—­: ì„±ìˆ˜
    mood: "trendy",    // ë¶„ìœ„ê¸°: í™í•œ
    tags: ["#ì¸íƒˆë•Œ", "#ì‚¬ì§„ë§›ì§‘", "#ì›¨ì´íŒ…ì£¼ì˜"],
    rating: 4.8,
    image: "â˜•ï¸",
    naverMapLink: "https://naver.me/example1", // ì‹¤ì œ ë„¤ì´ë²„ ì§€ë„ ê³µìœ  ë§í¬
    spots: [
      { name: "LCDC ì„œìš¸", type: "ë³µí•©ë¬¸í™”", icon: <Camera className="w-3 h-3" /> },
      { name: "í”¼ì¹˜ìŠ¤ ë„ì›", type: "ë³¼ê±°ë¦¬", icon: <Sun className="w-3 h-3" /> },
      { name: "ë¡œìš°ì»¤í”¼ìŠ¤íƒ ë“œ", type: "ì¹´í˜", icon: <Coffee className="w-3 h-3" /> }
    ]
  },
  {
    id: 2,
    title: "í•´ë°©ì´Œ ë…¸ì„ & ì•¼ê²½ ì‚°ì±…",
    description: "ë‚¨ì‚° íƒ€ì›Œê°€ ë³´ì´ëŠ” ë£¨í”„íƒ‘ ë²„ê±°ì§‘ê³¼ ì‚°ì±…ë¡œ",
    region: "itaewon", // ì§€ì—­: ì´íƒœì›/í•œë‚¨
    mood: "romantic",  // ë¶„ìœ„ê¸°: ë¡œë§¨í‹±
    tags: ["#ê¸°ë…ì¼", "#ì•¼ê²½", "#ë·°ë§›ì§‘"],
    rating: 4.9,
    image: "ğŸŒ†",
    naverMapLink: "https://naver.me/example2",
    spots: [
      { name: "ì‹ í¥ì‹œì¥", type: "êµ¬ê²½", icon: <MapPin className="w-3 h-3" /> },
      { name: "ë”ë°±í‘¸ë“œíŠ¸ëŸ­", type: "ì‹ì‚¬", icon: <Utensils className="w-3 h-3" /> },
      { name: "ë‚¨ì‚° ì†Œì›”ê¸¸", type: "ì‚°ì±…", icon: <Moon className="w-3 h-3" /> }
    ]
  },
  {
    id: 3,
    title: "ì—°ë‚¨ë™ ìˆ²ê¸¸ í”¼í¬ë‹‰",
    description: "ê²½ì˜ì„  ìˆ²ê¸¸ì„ ë”°ë¼ ê±·ëŠ” ê°€ë²¼ìš´ ì‚°ì±…ê³¼ ë§›ì§‘ íƒë°©",
    region: "hongdae", // ì§€ì—­: í™ëŒ€/ì—°ë‚¨
    mood: "casual",    // ë¶„ìœ„ê¸°: ìºì£¼ì–¼
    tags: ["#ê°€ë³ê²Œ", "#ì‚°ì±…", "#ë‚®ë§¥"],
    rating: 4.6,
    image: "ğŸŒ³",
    naverMapLink: "https://naver.me/example3",
    spots: [
      { name: "ê²½ì˜ì„ ìˆ²ê¸¸", type: "ì‚°ì±…", icon: <Sun className="w-3 h-3" /> },
      { name: "ëœë””ìŠ¤ë„ë„›", type: "ë””ì €íŠ¸", icon: <Coffee className="w-3 h-3" /> },
      { name: "ë°”ë‹¤íšŒì‚¬ë‘", type: "ì €ë…", icon: <Utensils className="w-3 h-3" /> }
    ]
  },
  {
    id: 4,
    title: "ì••êµ¬ì • ë¡œë°ì˜¤ ëŸ­ì…”ë¦¬ ë‹¤ì´ë‹",
    description: "íŠ¹ë³„í•œ ë‚ ì„ ìœ„í•œ íŒŒì¸ ë‹¤ì´ë‹ê³¼ ì¹µí…Œì¼ ë°”",
    region: "gangnam", // ì§€ì—­: ê°•ë‚¨/ì••êµ¬ì •
    mood: "romantic",
    tags: ["#í”Œë ‰ìŠ¤", "#ê³ ê¸‰", "#ì„±ê³µì "],
    rating: 4.9,
    image: "ğŸ¥‚",
    naverMapLink: "https://naver.me/example4",
    spots: [
      { name: "ë„ì‚°ê³µì›", type: "ì‚°ì±…", icon: <Sun className="w-3 h-3" /> },
      { name: "ë³¼í”¼ë…¸", type: "ì‹ì‚¬", icon: <Utensils className="w-3 h-3" /> },
      { name: "ìŠ¤í”¼í¬ì´ì§€ë°”", type: "ìˆ ", icon: <Moon className="w-3 h-3" /> }
    ]
  }
];

// ì§€ì—­ í•„í„° ì •ì˜
const REGIONS = [
  { id: 'all', label: 'ì„œìš¸ ì „ì²´' },
  { id: 'seongsu', label: 'ì„±ìˆ˜/ì„œìš¸ìˆ²' },
  { id: 'hongdae', label: 'í™ëŒ€/ì—°ë‚¨' },
  { id: 'itaewon', label: 'ì´íƒœì›/í•œë‚¨' },
  { id: 'gangnam', label: 'ê°•ë‚¨/ì••êµ¬ì •' },
  { id: 'jongno', label: 'ì¢…ë¡œ/ì„ì§€ë¡œ' },
];

const App = () => {
  const [selectedRegion, setSelectedRegion] = useState('all');
  const [selectedMood, setSelectedMood] = useState('all');
  const [courses, setCourses] = useState(SEOUL_COURSES);

  // í•„í„°ë§ ë¡œì§
  useEffect(() => {
    let result = SEOUL_COURSES;
    
    if (selectedRegion !== 'all') {
      result = result.filter(c => c.region === selectedRegion);
    }
    
    if (selectedMood !== 'all') {
      result = result.filter(c => c.mood === selectedMood);
    }
    
    setCourses(result);
  }, [selectedRegion, selectedMood]);

  return (
    <div className="min-h-screen bg-slate-50 font-sans text-slate-800 pb-20 max-w-md mx-auto shadow-2xl overflow-hidden min-w-[320px]">
      
      {/* ìƒë‹¨ í—¤ë” */}
      <header className="bg-white px-5 py-4 sticky top-0 z-20 border-b border-slate-100">
        <div className="flex justify-between items-center mb-4">
          <div>
            <h1 className="text-2xl font-black text-slate-900 tracking-tight">
              Seoul<span className="text-indigo-600">Vibe</span>
            </h1>
            <p className="text-xs text-slate-500 font-medium">ì„œìš¸ì˜ ëª¨ë“  ë°ì´íŠ¸ ì½”ìŠ¤</p>
          </div>
          <div className="bg-slate-100 p-2 rounded-full">
            <Heart className="w-5 h-5 text-indigo-500 fill-indigo-100" />
          </div>
        </div>

        {/* ì§€ì—­ í•„í„° (ê°€ë¡œ ìŠ¤í¬ë¡¤) */}
        <div className="flex gap-2 overflow-x-auto scrollbar-hide pb-1">
          {REGIONS.map((region) => (
            <button
              key={region.id}
              onClick={() => setSelectedRegion(region.id)}
              className={`px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${
                selectedRegion === region.id
                  ? 'bg-slate-900 text-white'
                  : 'bg-white text-slate-500 border border-slate-200 hover:bg-slate-50'
              }`}
            >
              {region.label}
            </button>
          ))}
        </div>
      </header>

      <main className="px-4 py-4 space-y-4">
        
        {/* ë¬´ë“œ íƒ­ (ê°„ë‹¨ í•„í„°) */}
        <div className="flex justify-center bg-white p-1 rounded-xl shadow-sm border border-slate-100 mb-2">
           {[
             { id: 'all', label: 'ì „ì²´' },
             { id: 'trendy', label: 'ğŸ”¥ í™í•œ' },
             { id: 'romantic', label: 'ğŸ’• ë¡œë§¨í‹±' },
             { id: 'casual', label: 'ğŸ‘Ÿ ìºì£¼ì–¼' }
           ].map(mood => (
             <button
               key={mood.id}
               onClick={() => setSelectedMood(mood.id)}
               className={`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${
                 selectedMood === mood.id 
                   ? 'bg-indigo-50 text-indigo-600' 
                   : 'text-slate-400 hover:text-slate-600'
               }`}
             >
               {mood.label}
             </button>
           ))}
        </div>

        {/* ì½”ìŠ¤ ë¦¬ìŠ¤íŠ¸ */}
        {courses.map((course) => (
          <article key={course.id} className="bg-white rounded-2xl p-5 shadow-sm border border-slate-100 hover:shadow-md transition-shadow">
            <div className="flex justify-between items-start mb-3">
              <div className="flex items-center gap-2">
                <span className="text-3xl">{course.image}</span>
                <div>
                  <h3 className="text-lg font-bold text-slate-900 leading-tight">{course.title}</h3>
                  <div className="flex gap-1 mt-1">
                    {course.tags.map((tag, i) => (
                      <span key={i} className="text-[10px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded font-medium">
                        {tag}
                      </span>
                    ))}
                  </div>
                </div>
              </div>
              <div className="flex flex-col items-end">
                 <span className="bg-yellow-50 text-yellow-600 text-xs font-bold px-2 py-1 rounded-md flex items-center gap-1">
                   <Star className="w-3 h-3 fill-yellow-600" /> {course.rating}
                 </span>
              </div>
            </div>

            <p className="text-slate-500 text-sm mb-4 leading-relaxed">
              {course.description}
            </p>

            {/* ë¯¸ë‹ˆ íƒ€ì„ë¼ì¸ */}
            <div className="flex items-center gap-2 mb-5 overflow-x-auto text-sm text-slate-600">
               {course.spots.map((spot, idx) => (
                 <React.Fragment key={idx}>
                   <div className="flex items-center gap-1 shrink-0 bg-slate-50 px-2 py-1 rounded border border-slate-100">
                     <span className="text-indigo-400">{spot.icon}</span>
                     <span className="font-semibold text-xs">{spot.name}</span>
                   </div>
                   {idx < course.spots.length - 1 && (
                     <span className="text-slate-300">â†’</span>
                   )}
                 </React.Fragment>
               ))}
            </div>

            {/* ì•¡ì…˜ ë²„íŠ¼ */}
            <div className="flex gap-2">
              <button 
                onClick={() => window.open(course.naverMapLink, '_blank')}
                className="flex-1 bg-[#03C75A] hover:bg-[#02b351] text-white py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-colors"
              >
                <img src="https://upload.wikimedia.org/wikipedia/commons/2/23/Naver_Map_icon.png" alt="N" className="w-4 h-4 rounded-sm bg-white p-[1px]" />
                ë„¤ì´ë²„ ì§€ë„ë¡œ ë³´ê¸°
              </button>
              <button className="flex-none w-12 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center transition-colors">
                <Share2 className="w-5 h-5" />
              </button>
            </div>
          </article>
        ))}

        {courses.length === 0 && (
          <div className="py-20 text-center">
             <div className="text-4xl mb-4">ğŸŒªï¸</div>
             <p className="text-slate-400 font-medium">ì´ëŸ°! í•´ë‹¹ ì§€ì—­/ë¶„ìœ„ê¸°ì˜ ì½”ìŠ¤ê°€ ì—†ë„¤ìš”.</p>
             <button 
               onClick={() => {setSelectedRegion('all'); setSelectedMood('all');}}
               className="mt-4 text-indigo-600 text-sm font-bold underline"
             >
               í•„í„° ì´ˆê¸°í™”
             </button>
          </div>
        )}

      </main>
    </div>
  );
};

export default App;
